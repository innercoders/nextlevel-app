<div class="home-container">
    <!-- Hero Carousel Section -->
    <div nz-row nzGutter="20" class="mb-4">
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="16">
            <nz-carousel nzAutoPlay [nzAutoPlaySpeed]="6000">
                <div nz-carousel-content style="background-image: url('/assets/images/background/dota_audience.jpeg');">
                    <div class="manifesto-banner">
                        <h2 class="title-neon">Manifesto</h2>
                        <h6>Nosso compromisso com a comunidade Brasileira</h6>

                        <div class="in-horizontal center">
                            <a nz-button nzType="text" nzSize="large" nzShape="round" class="mr-3 mt-3 bg-Gray" routerLink="/about-us">
                                <nz-icon nzType="info-circle" nzTheme="outline" />
                                Veja mais
                            </a>
                        </div>
                    </div>
                </div>
                <div nz-carousel-content style="background-image: url('/assets/images/background/default_header.jpg'); background-position: center right;">
                    <div class="nextlevel-banner">
                        <h2 class="title-neon">Campeonato NEXTLEVEL</h2>
                        <h6>O maior campeonato de Dota 2 do Brasil</h6>

                        <div class="in-horizontal center">
                            <a nz-button nzType="primary" nzSize="large" nzShape="round" class="mr-3 mt-3" href="https://discord.gg/cYvUESUgWQ" target="_blank">
                                <nz-icon nzType="discord" nzTheme="outline" />
                                Mais informações
                            </a>
                        </div>
                    </div>
                </div>
            </nz-carousel>
        </div>
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="8" class="stats-panel text-center">
            <h3>Campeonato NEXTLEVEL</h3>
            <div class="in-card p-3 mb-3">
                <h6 class="text-muted">Qualificatórias</h6>
                <h4 class="text-nextlevel">26 a 29 de Julho</h4>
            </div>

            <div class="in-card p-3 mb-3">
                <h6 class="text-muted">Fase de Grupos</h6>
                <h4 class="text-nextlevel">30 de Julho a 4 de Agosto</h4>
            </div>

            <div class="in-card p-3 mb-3">
                <h6 class="text-muted">Playoffs</h6>
                <h4 class="text-nextlevel">5 a 9 de Agosto</h4>
            </div>

            <div class="in-card p-3">
                <a nz-button nzType="primary" nzSize="large" nzShape="round" class="mr-3" href="https://discord.gg/cYvUESUgWQ" target="_blank">
                    <nz-icon nzType="discord" nzTheme="outline" />
                    Mais informações
                </a>

                <a nz-button nzType="text" nzSize="large" nzShape="round" class="bg-Gray" href="https://x.com/ns4rt/status/1924766684189229369" target="_blank">
                    <nz-icon nzType="x" nzTheme="outline" />
                    NS_ART
                </a>
            </div>
        </div>
    </div>

    <!-- Dota Rank Section -->
    <div nz-row class="section-container mb-4" [nzGutter]="[20, 20]">
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="12" nzXl="12">
            <div class="section-header">
                <h3>Partidas ao vivo</h3>
                <button nz-button nzType="primary" (click)="getOnGoingMatches()" [nzLoading]="loadingOnGoingMatches | async">
                    <span nz-icon nzType="reload" nzTheme="outline"></span>
                    Atualizar
                </button>
            </div>
            <div class="section-content">
                <nz-table 
                    #liveMatchesTable 
                    [nzData]="liveMatches" 
                    [nzLoading]="loadingOnGoingMatches | async" 
                    [nzShowPagination]="false"
                    [nzScroll]="{ y: '700px' }">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Placar</th>
                            <th [nzWidth]="'300px'">Heróis</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let match of liveMatchesTable.data">
                            <td>
                                <div class="in-horizontal">
                                    {{ match.matchId }}
                                    <button 
                                        nz-button 
                                        nzType="link" 
                                        nzSize="small" 
                                        nz-tooltip="Copiar ID"
                                        (click)="copyMatchId(match.matchId)">
                                        <span nz-icon nzType="copy" nzTheme="outline"></span>
                                    </button>
                                </div>
                                <div class="text-muted">
                                    {{ match.durationSeconds / 60 | number:'1.0-0' }} min
                                </div>
                            </td>
                            <td>
                                <div class="in-horizontal">
                                    <span class="text-success mr-2">{{ match.radiantKills ? match.radiantKills[match.radiantKills.length - 1] : 0 }}</span> 
                                    <span class="text-muted">:</span>
                                    <span class="text-danger ml-2">{{ match.direKills ? match.direKills[match.direKills.length - 1] : 0 }}</span>
                                </div>
                                <div class="text-muted">
                                    {{ match.averageMmr }} MMR
                                </div>
                            </td>
                            <td>
                                <div class="in-horizontal">
                                    <img class="cursor-pointer" [src]="player.dotaHero?.img" nz-tooltip [nzTooltipTitle]="player.dotaHero?.localized_name" 
                                        width="40" *ngFor="let player of match.players | slice:0:5" routerLink="/dota-meta/heroes/{{ player.dotaHero?.sanitizedName }}">
                                </div>
                                <div class="in-horizontal">
                                    <img class="cursor-pointer" [src]="player.dotaHero?.img" nz-tooltip [nzTooltipTitle]="player.dotaHero?.localized_name" 
                                        width="40" *ngFor="let player of match.players | slice:5:10" routerLink="/dota-meta/heroes/{{ player.dotaHero?.sanitizedName }}">
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </nz-table>
            </div>
        </div>
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="12" nzXl="12">
            <div class="section-header">
                <h3>Ranking</h3>
            </div>
            <div class="section-content">
                <nz-tabset class="p-3" (nzSelectChange)="onRegionTabChange($event)">
                    <nz-tab nzTitle="Brasil {{ dotaRankBrasil.length }}">
                        <nz-table 
                            #brasilTable 
                            [nzData]="dotaRankBrasil" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            class="brasil-table"
                            [nzScroll]="{ y: '600px' }">
                            <thead>
                                <tr>
                                    <th>Jogador</th>
                                    <th>MMR</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of brasilTable.data; let i = index">
                                    <td>{{ player.Player }}</td>
                                    <td>{{ player.MMR }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="Americas">
                        <nz-table 
                            #americasTable 
                            [nzData]="dotaRanksAmericas" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '600px' }">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Jogador</th>
                                    <th>MMR</th>
                                    <th>País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of americasTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.mmr }}</td>
                                    <td>{{ player.country || '-' }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="Europa">
                        <nz-table 
                            #europeTable 
                            [nzData]="dotaRanksEurope" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '600px' }">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Jogador</th>
                                    <th>MMR</th>
                                    <th>País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of europeTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.mmr }}</td>
                                    <td>{{ player.country || '-' }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="Sudeste Asiático">
                        <nz-table 
                            #seAsiaTable 
                            [nzData]="dotaRanksSeAsia" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '600px' }">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Jogador</th>
                                    <th>MMR</th>
                                    <th>País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of seAsiaTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.mmr }}</td>
                                    <td>{{ player.country || '-' }}</td>
                                </tr>   
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="China">
                        <nz-table 
                            #chinaTable 
                            [nzData]="dotaRanksChina" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '600px' }">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Jogador</th>
                                    <th>MMR</th>
                                    <th>Equipe</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of chinaTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.mmr }}</td>
                                    <td>{{ player.team || '-' }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                </nz-tabset>
            </div>
        </div>
    </div>
</div>
<div class="home-container">
    <!-- Hero Carousel Section -->
    <div nz-row nzGutter="20" class="mb-4">
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="16">
            <nz-carousel nzAutoPlay [nzAutoPlaySpeed]="6000">
                <div nz-carousel-content style="background-image: url('/assets/images/background/default_header.jpg'); background-position: center right;">
                    <div class="nextlevel-banner">
                        <h2 class="title-neon">Campeonato NEXTLEVEL</h2>
                        <h6>O maior campeonato de Dota 2 do Brasil</h6>

                        <div class="in-horizontal center">
                            <a nz-button nzType="primary" nzSize="large" nzShape="round" class="mr-3 mt-3" href="https://discord.gg/cYvUESUgWQ" target="_blank">
                                <nz-icon nzType="discord" nzTheme="outline" />
                                Mais informações
                            </a>
                        </div>
                    </div>
                </div>
                <div nz-carousel-content style="background-image: url('/assets/images/background/dota_audience.jpeg');">
                    <div class="manifesto-banner">
                        <h2 class="title-neon">Manifesto</h2>
                        <h6>Nosso compromisso com a comunidade Brasileira</h6>

                        <div class="in-horizontal center">
                            <a nz-button nzType="text" nzSize="large" nzShape="round" class="mr-3 mt-3 bg-Gray" routerLink="/about-us">
                                <nz-icon nzType="info-circle" nzTheme="outline" />
                                Veja mais
                            </a>
                        </div>
                    </div>
                </div>
                <div nz-carousel-content style="background-image: url('/assets/images/background/default_header.jpg'); background-position: center right;">
                    <div class="nextlevel-banner">
                        <h2 class="title-neon">Campeonato NEXTLEVEL</h2>
                        <h6>O maior campeonato de Dota 2 do Brasil</h6>

                        <div class="in-horizontal center">
                            <a nz-button nzType="primary" nzSize="large" nzShape="round" class="mr-3 mt-3" href="https://discord.gg/cYvUESUgWQ" target="_blank">
                                <nz-icon nzType="discord" nzTheme="outline" />
                                Mais informações
                            </a>
                        </div>
                    </div>
                </div>
            </nz-carousel>
        </div>
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="8" class="stats-panel text-center">
            <h3>Campeonato NEXTLEVEL</h3>
            <div class="in-card p-3 mb-3">
                <h6 class="text-muted">Qualificatórias</h6>
                <h4 class="text-nextlevel">26 a 29 de Julho</h4>
            </div>

            <div class="in-card p-3 mb-3">
                <h6 class="text-muted">Fase de Grupos</h6>
                <h4 class="text-nextlevel">30 de Julho a 4 de Agosto</h4>
            </div>

            <div class="in-card p-3 mb-3">
                <h6 class="text-muted">Playoffs</h6>
                <h4 class="text-nextlevel">5 a 9 de Agosto</h4>
            </div>

            <div class="in-card p-3">
                <a nz-button nzType="primary" nzSize="large" nzShape="round" class="mr-3" href="https://discord.gg/cYvUESUgWQ" target="_blank">
                    <nz-icon nzType="discord" nzTheme="outline" />
                    Mais informações
                </a>

                <a nz-button nzType="text" nzSize="large" nzShape="round" class="bg-Gray" href="https://x.com/ns4rt/status/1924766684189229369" target="_blank">
                    <nz-icon nzType="x" nzTheme="outline" />
                    NS_ART
                </a>
            </div>
        </div>
    </div>

    <!-- Dota Rank Section -->
    <div nz-row class="section-container mb-4" [nzGutter]="[20, 20]">
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="14">
            <div class="section-content">
                <div nz-row>
                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="12">
                        <div class="filter-controls p-3">
                            <nz-select nzPlaceHolder="Selecione heróis" [(ngModel)]="selectedHeroes" class="filter-select w-100" nzMode="multiple" (ngModelChange)="onHeroFilterChange($event)" nzAllowClear="true">
                                <nz-option *ngFor="let hero of heroes" [nzValue]="hero.id" [nzLabel]="hero.localized_name"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    <div class="p-3" nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="12">
                        <div class="filter-controls">
                            <nz-select [(ngModel)]="heroStatsRequest.leagueId" (ngModelChange)="onLeagueChange($event)" class="filter-select w-100" nzPlaceHolder="Selecione uma liga" nzAllowClear>
                                <nz-option *ngFor="let league of featuredLeagues" [nzValue]="league.leagueId" [nzLabel]="league.displayName || league.name"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    <div nz-col nzSpan="24">
                        <div class="filter-controls p-3">
                            <div class="filter-label">Mínimo de Partidas ({{ minMatchesFilter }})</div>
                            <nz-slider class="mt-0" [nzMin]="0" [nzMax]="100" [nzStep]="1" [(ngModel)]="minMatchesFilter" (ngModelChange)="onMinMatchesChange($event)"/>
                        </div>
                    </div>
                </div>

                <!-- Position Tabs -->
                <div class="in-card px-3 position-tabs" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
                    <nz-tabset style="margin-bottom: 0;" nzSize="large" nzCentered="true" (nzSelectedIndexChange)="onPositionTabChange($event)">
                        <nz-tab *ngFor="let position of positions" [nzTitle]="titleTemplate">
                            <ng-template #titleTemplate>
                                <div class="in-horizontal">
                                    <img height="20px" class="mr-2" [src]="getPositionImage(position.value)" *ngIf="position.value">
                                    <span class="d-none d-xl-block" *ngIf="position.value">{{ position.label }}</span>
                                    <span *ngIf="!position.value">Todos</span>
                                </div>
                            </ng-template>
                        </nz-tab>
                    </nz-tabset>
                </div>

                <!-- Meta Heroes Table -->
                <div class="in-tab-content">
                    <nz-table #metaTable 
                        [nzData]="metaHeroes" 
                        [nzLoading]="loadingMeta" 
                        [nzShowPagination]="false" 
                        [nzPageSize]="10" 
                        [nzScroll]="{ y: '600px' }"
                        class="heroes-table">
                        <thead>
                            <tr>
                                <th [nzWidth]="'110px'">Herói</th>
                                <th>Ranqueadas</th>
                                <th *ngIf="selectedLeague">Profissionais</th>
                                <th *ngIf="selectedLeague">
                                    Contestado
                                    <nz-icon nzType="info-circle" nzTheme="outline" nz-tooltip="Presença do herói nos picks ou bans"/>
                                </th>
                                <th>K/D/A</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let hero of metaHeroes">
                                <tr *ngIf="hero.dotaHero" class="hero-row">
                                    <td>
                                        <app-dota-hero [hero]="hero.dotaHero"></app-dota-hero>
                                    </td>
                                    <td>
                                        <div class="in-vertical">
                                            <span [ngClass]="{'text-success': hero.winRate > 50, 'text-danger': hero.winRate < 50}">{{ hero.winRate | number:'1.0-1' }}%</span>
                                            <span class="text-muted">{{ hero.totalMatches }} partidas</span>
                                        </div>
                                    </td>
                                    <td *ngIf="selectedLeague">
                                        <div class="in-vertical">
                                            <span [ngClass]="{'text-success': hero.tournamentWinRate > 50, 'text-danger': hero.tournamentWinRate < 50}">{{ hero.tournamentWinRate | number:'1.0-1' }}%</span>
                                            <span class="text-muted">{{ hero.tournamentMatches }} partidas</span>
                                        </div>
                                    </td>
                                    <td *ngIf="selectedLeague">
                                        <div class="in-horizontal">
                                            <span class="mr-1">{{ hero.tournamentContest }} </span>
                                            <span class="text-muted"> picks/bans</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="in-horizontal">
                                            <span class="text-success">{{ hero.avgKills | number:'1.0-0' }}</span> 
                                            <span class="text-muted">/</span> 
                                            <span class="text-danger">{{ hero.avgDeaths | number:'1.0-0' }}</span> 
                                            <span class="text-muted">/</span> 
                                            <span class="text-info">{{ hero.avgAssists | number:'1.0-0' }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </nz-table>
                </div>
            </div>
        </div>

        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="10">
            <div class="section-content">
                <nz-tabset class="px-3" (nzSelectChange)="onRegionTabChange($event)">
                    <nz-tab nzTitle="Brasil">
                        <nz-table 
                            #brasilTable 
                            [nzData]="dotaRankBrasil" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            class="brasil-table"
                            [nzScroll]="{ y: '730px' }">
                            <thead>
                                <tr>
                                    <th [nzWidth]="'60px'">#</th>
                                    <th>Jogador</th>
                                    <th [nzWidth]="'100px'">MMR</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of brasilTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.Player }}</td>
                                    <td>{{ player.MMR }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="Americas">
                        <nz-table 
                            #americasTable 
                            [nzData]="dotaRanksAmericas" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '730px' }">
                            <thead>
                                <tr>
                                    <th [nzWidth]="'60px'">#</th>
                                    <th>Jogador</th>
                                    <th [nzWidth]="'80px'">País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of americasTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.country || '-' }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="Europa">
                        <nz-table 
                            #europeTable 
                            [nzData]="dotaRanksEurope" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '730px' }">
                            <thead>
                                <tr>
                                    <th [nzWidth]="'60px'">#</th>
                                    <th>Jogador</th>
                                    <th [nzWidth]="'80px'">País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of europeTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.country || '-' }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="Sudeste Asiático">
                        <nz-table 
                            #seAsiaTable 
                            [nzData]="dotaRanksSeAsia" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '730px' }">
                            <thead>
                                <tr>
                                    <th [nzWidth]="'60px'">#</th>
                                    <th>Jogador</th>
                                    <th [nzWidth]="'80px'">País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of seAsiaTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.country || '-' }}</td>
                                </tr>   
                            </tbody>
                        </nz-table>
                    </nz-tab>
                    <nz-tab nzTitle="China">
                        <nz-table 
                            #chinaTable 
                            [nzData]="dotaRanksChina" 
                            [nzPageSize]="100"
                            [nzLoading]="false" 
                            [nzShowPagination]="false"
                            [nzScroll]="{ y: '730px' }">
                            <thead>
                                <tr>
                                    <th [nzWidth]="'60px'">#</th>
                                    <th>Jogador</th>
                                    <th [nzWidth]="'80px'">País</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let player of chinaTable.data; let i = index">
                                    <td><strong>{{ i + 1 }}</strong></td>
                                    <td>{{ player.name }}</td>
                                    <td>{{ player.mmr }}</td>
                                    <td>{{ player.team || '-' }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                </nz-tabset>
            </div>
        </div>
    </div>
</div>